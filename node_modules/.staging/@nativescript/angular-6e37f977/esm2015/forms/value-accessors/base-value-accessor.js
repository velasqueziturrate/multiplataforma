import { unsetValue } from '@nativescript/core';
import { isBlank } from '../../lang-facade';
export class BaseValueAccessor {
    constructor(view) {
        this.view = view;
        this.pendingChangeNotification = 0;
        this.onChange = (_) => { };
        this.onTouched = () => { };
    }
    registerOnChange(fn) {
        this.onChange = (arg) => {
            if (this.pendingChangeNotification) {
                clearTimeout(this.pendingChangeNotification);
            }
            this.pendingChangeNotification = setTimeout(() => {
                this.pendingChangeNotification = 0;
                fn(arg);
            }, 20);
        };
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    setDisabledState(isDisabled) {
        this.view.isEnabled = !isDisabled;
    }
    writeValue(_) { }
    normalizeValue(value) {
        return isBlank(value) ? unsetValue : value;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZS12YWx1ZS1hY2Nlc3Nvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2Zvcm1zL3ZhbHVlLWFjY2Vzc29ycy9iYXNlLXZhbHVlLWFjY2Vzc29yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBUSxVQUFVLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUV0RCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFFNUMsTUFBTSxPQUFPLGlCQUFpQjtJQUs3QixZQUFtQixJQUFXO1FBQVgsU0FBSSxHQUFKLElBQUksQ0FBTztRQUp0Qiw4QkFBeUIsR0FBUSxDQUFDLENBQUM7UUFDM0MsYUFBUSxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRSxDQUFDLENBQUM7UUFDckIsY0FBUyxHQUFHLEdBQUcsRUFBRSxHQUFFLENBQUMsQ0FBQztJQUVZLENBQUM7SUFFbEMsZ0JBQWdCLENBQUMsRUFBb0I7UUFDcEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLEdBQUcsRUFBRSxFQUFFO1lBQ3ZCLElBQUksSUFBSSxDQUFDLHlCQUF5QixFQUFFO2dCQUNuQyxZQUFZLENBQUMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLENBQUM7YUFDN0M7WUFDRCxJQUFJLENBQUMseUJBQXlCLEdBQUcsVUFBVSxDQUFDLEdBQUcsRUFBRTtnQkFDaEQsSUFBSSxDQUFDLHlCQUF5QixHQUFHLENBQUMsQ0FBQztnQkFDbkMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ1QsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ1IsQ0FBQyxDQUFDO0lBQ0gsQ0FBQztJQUVELGlCQUFpQixDQUFDLEVBQWM7UUFDL0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7SUFDckIsQ0FBQztJQUVELGdCQUFnQixDQUFDLFVBQW1CO1FBQ25DLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsVUFBVSxDQUFDO0lBQ25DLENBQUM7SUFFRCxVQUFVLENBQUMsQ0FBTSxJQUFHLENBQUM7SUFFWCxjQUFjLENBQUMsS0FBVTtRQUNsQyxPQUFPLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7SUFDNUMsQ0FBQztDQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBWaWV3LCB1bnNldFZhbHVlIH0gZnJvbSAnQG5hdGl2ZXNjcmlwdC9jb3JlJztcblxuaW1wb3J0IHsgaXNCbGFuayB9IGZyb20gJy4uLy4uL2xhbmctZmFjYWRlJztcblxuZXhwb3J0IGNsYXNzIEJhc2VWYWx1ZUFjY2Vzc29yPFRWaWV3IGV4dGVuZHMgVmlldz4gaW1wbGVtZW50cyBDb250cm9sVmFsdWVBY2Nlc3NvciB7XG5cdHByaXZhdGUgcGVuZGluZ0NoYW5nZU5vdGlmaWNhdGlvbjogYW55ID0gMDtcblx0b25DaGFuZ2UgPSAoXykgPT4ge307XG5cdG9uVG91Y2hlZCA9ICgpID0+IHt9O1xuXG5cdGNvbnN0cnVjdG9yKHB1YmxpYyB2aWV3OiBUVmlldykge31cblxuXHRyZWdpc3Rlck9uQ2hhbmdlKGZuOiAoXzogYW55KSA9PiB2b2lkKTogdm9pZCB7XG5cdFx0dGhpcy5vbkNoYW5nZSA9IChhcmcpID0+IHtcblx0XHRcdGlmICh0aGlzLnBlbmRpbmdDaGFuZ2VOb3RpZmljYXRpb24pIHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMucGVuZGluZ0NoYW5nZU5vdGlmaWNhdGlvbik7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnBlbmRpbmdDaGFuZ2VOb3RpZmljYXRpb24gPSBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0dGhpcy5wZW5kaW5nQ2hhbmdlTm90aWZpY2F0aW9uID0gMDtcblx0XHRcdFx0Zm4oYXJnKTtcblx0XHRcdH0sIDIwKTtcblx0XHR9O1xuXHR9XG5cblx0cmVnaXN0ZXJPblRvdWNoZWQoZm46ICgpID0+IHZvaWQpOiB2b2lkIHtcblx0XHR0aGlzLm9uVG91Y2hlZCA9IGZuO1xuXHR9XG5cblx0c2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XG5cdFx0dGhpcy52aWV3LmlzRW5hYmxlZCA9ICFpc0Rpc2FibGVkO1xuXHR9XG5cblx0d3JpdGVWYWx1ZShfOiBhbnkpIHt9XG5cblx0cHJvdGVjdGVkIG5vcm1hbGl6ZVZhbHVlKHZhbHVlOiBhbnkpOiBhbnkge1xuXHRcdHJldHVybiBpc0JsYW5rKHZhbHVlKSA/IHVuc2V0VmFsdWUgOiB2YWx1ZTtcblx0fVxufVxuIl19