import { Directive, ElementRef, Input, TemplateRef, ViewContainerRef } from '@angular/core';
import { TabViewItem } from '@nativescript/core';
import { InvisibleNode } from '../element-registry';
import { NativeScriptDebug } from '../trace';
import { isBlank } from '../lang-facade';
export class TabViewDirective {
    constructor(element) {
        this.tabView = element.nativeElement;
    }
    get selectedIndex() {
        return this._selectedIndex;
    }
    set selectedIndex(value) {
        this._selectedIndex = value;
        if (this.viewInitialized) {
            this.tabView.selectedIndex = this._selectedIndex;
        }
    }
    ngAfterViewInit() {
        this.viewInitialized = true;
        if (NativeScriptDebug.isLogEnabled()) {
            NativeScriptDebug.rendererLog('this._selectedIndex: ' + this._selectedIndex);
        }
        if (!isBlank(this._selectedIndex)) {
            this.tabView.selectedIndex = this._selectedIndex;
        }
    }
}
TabViewDirective.decorators = [
    { type: Directive, args: [{
                selector: 'TabView',
            },] }
];
TabViewDirective.ctorParameters = () => [
    { type: ElementRef }
];
TabViewDirective.propDecorators = {
    selectedIndex: [{ type: Input }]
};
export class TabViewItemDirective {
    constructor(owner, templateRef, viewContainer) {
        this.owner = owner;
        this.templateRef = templateRef;
        this.viewContainer = viewContainer;
    }
    set config(config) {
        if (!this._config || this._config.iconSource !== config.iconSource || this._config.title !== config.title || this._config.textTransform !== config.textTransform) {
            this._config = config;
            this.applyConfig();
        }
    }
    get config() {
        // tslint:disable-line:no-input-rename
        return this._config || {};
    }
    set title(title) {
        this.config = Object.assign(this.config, { title });
    }
    get title() {
        return this.config.title;
    }
    set iconSource(iconSource) {
        this.config = Object.assign(this.config, { iconSource });
    }
    get iconSource() {
        return this.config.iconSource;
    }
    set textTransform(textTransform) {
        this.config = Object.assign(this.config, { textTransform });
    }
    get textTransform() {
        return this.config.textTransform;
    }
    ensureItem() {
        if (!this.item) {
            this.item = new TabViewItem();
        }
    }
    applyConfig() {
        this.ensureItem();
        if (this.config.title) {
            this.item.title = this.config.title;
        }
        if (this.config.iconSource) {
            this.item.iconSource = this.config.iconSource;
        }
        //  TabViewItem textTransform has a default value for Android that kick in
        // only if no value (even a null value) is set.
        if (this.config.textTransform) {
            this.item.textTransform = this.config.textTransform;
        }
    }
    ngOnInit() {
        this.applyConfig();
        const viewRef = this.viewContainer.createEmbeddedView(this.templateRef);
        // Filter out text nodes and comments
        const realViews = viewRef.rootNodes.filter((node) => !(node instanceof InvisibleNode));
        if (realViews.length > 0) {
            this.item.view = realViews[0];
            const newItems = (this.owner.tabView.items || []).concat([this.item]);
            this.owner.tabView.items = newItems;
        }
    }
}
TabViewItemDirective.decorators = [
    { type: Directive, args: [{
                selector: '[tabItem]',
            },] }
];
TabViewItemDirective.ctorParameters = () => [
    { type: TabViewDirective },
    { type: TemplateRef },
    { type: ViewContainerRef }
];
TabViewItemDirective.propDecorators = {
    config: [{ type: Input, args: ['tabItem',] }],
    title: [{ type: Input }],
    iconSource: [{ type: Input }],
    textTransform: [{ type: Input }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFiLXZpZXcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9kaXJlY3RpdmVzL3RhYi12aWV3LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBaUIsU0FBUyxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQVUsV0FBVyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ25ILE9BQU8sRUFBVyxXQUFXLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUUxRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDcEQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sVUFBVSxDQUFDO0FBQzdDLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQVl6QyxNQUFNLE9BQU8sZ0JBQWdCO0lBaUI1QixZQUFZLE9BQW1CO1FBQzlCLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQztJQUN0QyxDQUFDO0lBZEQsSUFDSSxhQUFhO1FBQ2hCLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQztJQUM1QixDQUFDO0lBRUQsSUFBSSxhQUFhLENBQUMsS0FBSztRQUN0QixJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztRQUM1QixJQUFJLElBQUksQ0FBQyxlQUFlLEVBQUU7WUFDekIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQztTQUNqRDtJQUNGLENBQUM7SUFNRCxlQUFlO1FBQ2QsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7UUFDNUIsSUFBSSxpQkFBaUIsQ0FBQyxZQUFZLEVBQUUsRUFBRTtZQUNyQyxpQkFBaUIsQ0FBQyxXQUFXLENBQUMsdUJBQXVCLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1NBQzdFO1FBQ0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLEVBQUU7WUFD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LFdBQVcsRUFBRSxDQUFDO1FBRW5CLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3hFLHFDQUFxQztRQUNyQyxNQUFNLFNBQVMsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksWUFBWSxhQUFhLENBQUMsQ0FBQyxDQUFDO1FBRXZGLElBQUksU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDekIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRTlCLE1BQU0sUUFBUSxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3RFLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUM7U0FDcEM7SUFDRixDQUFDOzs7WUF0RkQsU0FBUyxTQUFDO2dCQUNWLFFBQVEsRUFBRSxXQUFXO2FBQ3JCOzs7WUFLMkIsZ0JBQWdCO1lBeERrQixXQUFXO1lBQUUsZ0JBQWdCOzs7cUJBMER6RixLQUFLLFNBQUMsU0FBUztvQkFhZixLQUFLO3lCQVNMLEtBQUs7NEJBU0wsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFmdGVyVmlld0luaXQsIERpcmVjdGl2ZSwgRWxlbWVudFJlZiwgSW5wdXQsIE9uSW5pdCwgVGVtcGxhdGVSZWYsIFZpZXdDb250YWluZXJSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFRhYlZpZXcsIFRhYlZpZXdJdGVtIH0gZnJvbSAnQG5hdGl2ZXNjcmlwdC9jb3JlJztcblxuaW1wb3J0IHsgSW52aXNpYmxlTm9kZSB9IGZyb20gJy4uL2VsZW1lbnQtcmVnaXN0cnknO1xuaW1wb3J0IHsgTmF0aXZlU2NyaXB0RGVidWcgfSBmcm9tICcuLi90cmFjZSc7XG5pbXBvcnQgeyBpc0JsYW5rIH0gZnJvbSAnLi4vbGFuZy1mYWNhZGUnO1xuXG50eXBlIFRleHRUcmFuc2Zvcm0gPSAnaW5pdGlhbCcgfCAnbm9uZScgfCAnY2FwaXRhbGl6ZScgfCAndXBwZXJjYXNlJyB8ICdsb3dlcmNhc2UnO1xuZXhwb3J0IGludGVyZmFjZSBUYWJWaWV3SXRlbURlZiB7XG5cdHRpdGxlPzogc3RyaW5nO1xuXHRpY29uU291cmNlPzogc3RyaW5nO1xuXHR0ZXh0VHJhbnNmb3JtPzogVGV4dFRyYW5zZm9ybTtcbn1cblxuQERpcmVjdGl2ZSh7XG5cdHNlbGVjdG9yOiAnVGFiVmlldycsIC8vIHRzbGludDpkaXNhYmxlLWxpbmU6ZGlyZWN0aXZlLXNlbGVjdG9yXG59KVxuZXhwb3J0IGNsYXNzIFRhYlZpZXdEaXJlY3RpdmUgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0IHtcblx0cHVibGljIHRhYlZpZXc6IFRhYlZpZXc7XG5cdHByaXZhdGUgX3NlbGVjdGVkSW5kZXg6IG51bWJlcjtcblx0cHJpdmF0ZSB2aWV3SW5pdGlhbGl6ZWQ6IGJvb2xlYW47XG5cblx0QElucHV0KClcblx0Z2V0IHNlbGVjdGVkSW5kZXgoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fc2VsZWN0ZWRJbmRleDtcblx0fVxuXG5cdHNldCBzZWxlY3RlZEluZGV4KHZhbHVlKSB7XG5cdFx0dGhpcy5fc2VsZWN0ZWRJbmRleCA9IHZhbHVlO1xuXHRcdGlmICh0aGlzLnZpZXdJbml0aWFsaXplZCkge1xuXHRcdFx0dGhpcy50YWJWaWV3LnNlbGVjdGVkSW5kZXggPSB0aGlzLl9zZWxlY3RlZEluZGV4O1xuXHRcdH1cblx0fVxuXG5cdGNvbnN0cnVjdG9yKGVsZW1lbnQ6IEVsZW1lbnRSZWYpIHtcblx0XHR0aGlzLnRhYlZpZXcgPSBlbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG5cdH1cblxuXHRuZ0FmdGVyVmlld0luaXQoKSB7XG5cdFx0dGhpcy52aWV3SW5pdGlhbGl6ZWQgPSB0cnVlO1xuXHRcdGlmIChOYXRpdmVTY3JpcHREZWJ1Zy5pc0xvZ0VuYWJsZWQoKSkge1xuXHRcdFx0TmF0aXZlU2NyaXB0RGVidWcucmVuZGVyZXJMb2coJ3RoaXMuX3NlbGVjdGVkSW5kZXg6ICcgKyB0aGlzLl9zZWxlY3RlZEluZGV4KTtcblx0XHR9XG5cdFx0aWYgKCFpc0JsYW5rKHRoaXMuX3NlbGVjdGVkSW5kZXgpKSB7XG5cdFx0XHR0aGlzLnRhYlZpZXcuc2VsZWN0ZWRJbmRleCA9IHRoaXMuX3NlbGVjdGVkSW5kZXg7XG5cdFx0fVxuXHR9XG59XG5cbkBEaXJlY3RpdmUoe1xuXHRzZWxlY3RvcjogJ1t0YWJJdGVtXScsIC8vIHRzbGludDpkaXNhYmxlLWxpbmU6ZGlyZWN0aXZlLXNlbGVjdG9yXG59KVxuZXhwb3J0IGNsYXNzIFRhYlZpZXdJdGVtRGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0IHtcblx0cHJpdmF0ZSBpdGVtOiBUYWJWaWV3SXRlbTtcblx0cHJpdmF0ZSBfY29uZmlnOiBUYWJWaWV3SXRlbURlZjtcblxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIG93bmVyOiBUYWJWaWV3RGlyZWN0aXZlLCBwcml2YXRlIHRlbXBsYXRlUmVmOiBUZW1wbGF0ZVJlZjxhbnk+LCBwcml2YXRlIHZpZXdDb250YWluZXI6IFZpZXdDb250YWluZXJSZWYpIHt9XG5cblx0QElucHV0KCd0YWJJdGVtJylcblx0c2V0IGNvbmZpZyhjb25maWc6IFRhYlZpZXdJdGVtRGVmKSB7XG5cdFx0aWYgKCF0aGlzLl9jb25maWcgfHwgdGhpcy5fY29uZmlnLmljb25Tb3VyY2UgIT09IGNvbmZpZy5pY29uU291cmNlIHx8IHRoaXMuX2NvbmZpZy50aXRsZSAhPT0gY29uZmlnLnRpdGxlIHx8IHRoaXMuX2NvbmZpZy50ZXh0VHJhbnNmb3JtICE9PSBjb25maWcudGV4dFRyYW5zZm9ybSkge1xuXHRcdFx0dGhpcy5fY29uZmlnID0gY29uZmlnO1xuXHRcdFx0dGhpcy5hcHBseUNvbmZpZygpO1xuXHRcdH1cblx0fVxuXG5cdGdldCBjb25maWcoKTogVGFiVmlld0l0ZW1EZWYge1xuXHRcdC8vIHRzbGludDpkaXNhYmxlLWxpbmU6bm8taW5wdXQtcmVuYW1lXG5cdFx0cmV0dXJuIHRoaXMuX2NvbmZpZyB8fCB7fTtcblx0fVxuXG5cdEBJbnB1dCgpXG5cdHNldCB0aXRsZSh0aXRsZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5jb25maWcgPSBPYmplY3QuYXNzaWduKHRoaXMuY29uZmlnLCB7IHRpdGxlIH0pO1xuXHR9XG5cblx0Z2V0IHRpdGxlKCkge1xuXHRcdHJldHVybiB0aGlzLmNvbmZpZy50aXRsZTtcblx0fVxuXG5cdEBJbnB1dCgpXG5cdHNldCBpY29uU291cmNlKGljb25Tb3VyY2U6IHN0cmluZykge1xuXHRcdHRoaXMuY29uZmlnID0gT2JqZWN0LmFzc2lnbih0aGlzLmNvbmZpZywgeyBpY29uU291cmNlIH0pO1xuXHR9XG5cblx0Z2V0IGljb25Tb3VyY2UoKSB7XG5cdFx0cmV0dXJuIHRoaXMuY29uZmlnLmljb25Tb3VyY2U7XG5cdH1cblxuXHRASW5wdXQoKVxuXHRzZXQgdGV4dFRyYW5zZm9ybSh0ZXh0VHJhbnNmb3JtOiBUZXh0VHJhbnNmb3JtKSB7XG5cdFx0dGhpcy5jb25maWcgPSBPYmplY3QuYXNzaWduKHRoaXMuY29uZmlnLCB7IHRleHRUcmFuc2Zvcm0gfSk7XG5cdH1cblxuXHRnZXQgdGV4dFRyYW5zZm9ybSgpIHtcblx0XHRyZXR1cm4gdGhpcy5jb25maWcudGV4dFRyYW5zZm9ybTtcblx0fVxuXG5cdHByaXZhdGUgZW5zdXJlSXRlbSgpIHtcblx0XHRpZiAoIXRoaXMuaXRlbSkge1xuXHRcdFx0dGhpcy5pdGVtID0gbmV3IFRhYlZpZXdJdGVtKCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhcHBseUNvbmZpZygpIHtcblx0XHR0aGlzLmVuc3VyZUl0ZW0oKTtcblxuXHRcdGlmICh0aGlzLmNvbmZpZy50aXRsZSkge1xuXHRcdFx0dGhpcy5pdGVtLnRpdGxlID0gdGhpcy5jb25maWcudGl0bGU7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuY29uZmlnLmljb25Tb3VyY2UpIHtcblx0XHRcdHRoaXMuaXRlbS5pY29uU291cmNlID0gdGhpcy5jb25maWcuaWNvblNvdXJjZTtcblx0XHR9XG5cblx0XHQvLyAgVGFiVmlld0l0ZW0gdGV4dFRyYW5zZm9ybSBoYXMgYSBkZWZhdWx0IHZhbHVlIGZvciBBbmRyb2lkIHRoYXQga2ljayBpblxuXHRcdC8vIG9ubHkgaWYgbm8gdmFsdWUgKGV2ZW4gYSBudWxsIHZhbHVlKSBpcyBzZXQuXG5cdFx0aWYgKHRoaXMuY29uZmlnLnRleHRUcmFuc2Zvcm0pIHtcblx0XHRcdHRoaXMuaXRlbS50ZXh0VHJhbnNmb3JtID0gdGhpcy5jb25maWcudGV4dFRyYW5zZm9ybTtcblx0XHR9XG5cdH1cblxuXHRuZ09uSW5pdCgpIHtcblx0XHR0aGlzLmFwcGx5Q29uZmlnKCk7XG5cblx0XHRjb25zdCB2aWV3UmVmID0gdGhpcy52aWV3Q29udGFpbmVyLmNyZWF0ZUVtYmVkZGVkVmlldyh0aGlzLnRlbXBsYXRlUmVmKTtcblx0XHQvLyBGaWx0ZXIgb3V0IHRleHQgbm9kZXMgYW5kIGNvbW1lbnRzXG5cdFx0Y29uc3QgcmVhbFZpZXdzID0gdmlld1JlZi5yb290Tm9kZXMuZmlsdGVyKChub2RlKSA9PiAhKG5vZGUgaW5zdGFuY2VvZiBJbnZpc2libGVOb2RlKSk7XG5cblx0XHRpZiAocmVhbFZpZXdzLmxlbmd0aCA+IDApIHtcblx0XHRcdHRoaXMuaXRlbS52aWV3ID0gcmVhbFZpZXdzWzBdO1xuXG5cdFx0XHRjb25zdCBuZXdJdGVtcyA9ICh0aGlzLm93bmVyLnRhYlZpZXcuaXRlbXMgfHwgW10pLmNvbmNhdChbdGhpcy5pdGVtXSk7XG5cdFx0XHR0aGlzLm93bmVyLnRhYlZpZXcuaXRlbXMgPSBuZXdJdGVtcztcblx0XHR9XG5cdH1cbn1cbiJdfQ==