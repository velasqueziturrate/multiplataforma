import { InjectionToken } from '@angular/core';
import { Frame, Page, Device } from '@nativescript/core';
export const APP_ROOT_VIEW = new InjectionToken('NativeScriptAppRootView');
export const DeviceToken = new InjectionToken('NativeScriptPlatformDeviceToken');
export const PAGE_FACTORY = new InjectionToken('NativeScriptPageFactory');
export const defaultPageFactory = function (_opts) {
    return new Page();
};
export const defaultPageFactoryProvider = { provide: PAGE_FACTORY, useValue: defaultPageFactory };
let _rootPageRef;
export function setRootPage(page) {
    _rootPageRef = new WeakRef(page);
}
export function getRootPage() {
    return _rootPageRef && _rootPageRef.get();
}
// Use an exported function to make the AoT compiler happy.
export function getDefaultPage() {
    const rootPage = getRootPage();
    if (rootPage instanceof Page) {
        return rootPage;
    }
    // if (rootPage) {
    // 	return rootPage;
    // }
    const frame = Frame.topmost();
    if (frame && frame.currentPage) {
        return frame.currentPage;
    }
    return null;
}
export const defaultPageProvider = { provide: Page, useFactory: getDefaultPage };
// Use an exported function to make the AoT compiler happy.
export function getDefaultFrame() {
    return Frame.topmost();
}
export const defaultFrameProvider = { provide: Frame, useFactory: getDefaultFrame };
// Use an exported function to make the AoT compiler happy.
export function getDefaultDevice() {
    return Device;
}
export const defaultDeviceProvider = { provide: DeviceToken, useFactory: getDefaultDevice };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGxhdGZvcm0tcHJvdmlkZXJzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vcGxhdGZvcm0tcHJvdmlkZXJzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxjQUFjLEVBQXlCLE1BQU0sZUFBZSxDQUFDO0FBRXRFLE9BQU8sRUFBRSxLQUFLLEVBQVEsSUFBSSxFQUFXLE1BQU0sRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBRXhFLE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyxJQUFJLGNBQWMsQ0FBTyx5QkFBeUIsQ0FBQyxDQUFDO0FBQ2pGLE1BQU0sQ0FBQyxNQUFNLFdBQVcsR0FBRyxJQUFJLGNBQWMsQ0FBVSxpQ0FBaUMsQ0FBQyxDQUFDO0FBVTFGLE1BQU0sQ0FBQyxNQUFNLFlBQVksR0FBRyxJQUFJLGNBQWMsQ0FBYyx5QkFBeUIsQ0FBQyxDQUFDO0FBQ3ZGLE1BQU0sQ0FBQyxNQUFNLGtCQUFrQixHQUFnQixVQUFVLEtBQXlCO0lBQ2pGLE9BQU8sSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUNuQixDQUFDLENBQUM7QUFDRixNQUFNLENBQUMsTUFBTSwwQkFBMEIsR0FBRyxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFFLGtCQUFrQixFQUFFLENBQUM7QUFFbEcsSUFBSSxZQUEyQixDQUFDO0FBRWhDLE1BQU0sVUFBVSxXQUFXLENBQUMsSUFBVTtJQUNyQyxZQUFZLEdBQUcsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDbEMsQ0FBQztBQUVELE1BQU0sVUFBVSxXQUFXO0lBQzFCLE9BQU8sWUFBWSxJQUFJLFlBQVksQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUMzQyxDQUFDO0FBRUQsMkRBQTJEO0FBQzNELE1BQU0sVUFBVSxjQUFjO0lBQzdCLE1BQU0sUUFBUSxHQUFHLFdBQVcsRUFBRSxDQUFDO0lBQy9CLElBQUksUUFBUSxZQUFZLElBQUksRUFBRTtRQUM3QixPQUFPLFFBQVEsQ0FBQztLQUNoQjtJQUNELGtCQUFrQjtJQUNsQixvQkFBb0I7SUFDcEIsSUFBSTtJQUVKLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUM5QixJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsV0FBVyxFQUFFO1FBQy9CLE9BQU8sS0FBSyxDQUFDLFdBQVcsQ0FBQztLQUN6QjtJQUVELE9BQU8sSUFBSSxDQUFDO0FBQ2IsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLG1CQUFtQixHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsY0FBYyxFQUFFLENBQUM7QUFFakYsMkRBQTJEO0FBQzNELE1BQU0sVUFBVSxlQUFlO0lBQzlCLE9BQU8sS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ3hCLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxvQkFBb0IsR0FBRyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLGVBQWUsRUFBRSxDQUFDO0FBRXBGLDJEQUEyRDtBQUMzRCxNQUFNLFVBQVUsZ0JBQWdCO0lBQy9CLE9BQU8sTUFBTSxDQUFDO0FBQ2YsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUFHLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGlvblRva2VuLCBJbmplY3RhYmxlLCBPbkRlc3Ryb3kgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgRnJhbWUsIFZpZXcsIFBhZ2UsIElEZXZpY2UsIERldmljZSB9IGZyb20gJ0BuYXRpdmVzY3JpcHQvY29yZSc7XG5cbmV4cG9ydCBjb25zdCBBUFBfUk9PVF9WSUVXID0gbmV3IEluamVjdGlvblRva2VuPFZpZXc+KCdOYXRpdmVTY3JpcHRBcHBSb290VmlldycpO1xuZXhwb3J0IGNvbnN0IERldmljZVRva2VuID0gbmV3IEluamVjdGlvblRva2VuPElEZXZpY2U+KCdOYXRpdmVTY3JpcHRQbGF0Zm9ybURldmljZVRva2VuJyk7XG5cbmV4cG9ydCB0eXBlIFBhZ2VGYWN0b3J5ID0gKG9wdGlvbnM6IFBhZ2VGYWN0b3J5T3B0aW9ucykgPT4gUGFnZTtcbmV4cG9ydCBpbnRlcmZhY2UgUGFnZUZhY3RvcnlPcHRpb25zIHtcblx0aXNCb290c3RyYXA/OiBib29sZWFuO1xuXHRpc0xpdmVzeW5jPzogYm9vbGVhbjtcblx0aXNNb2RhbD86IGJvb2xlYW47XG5cdGlzTmF2aWdhdGlvbj86IGJvb2xlYW47XG5cdGNvbXBvbmVudFR5cGU/OiBhbnk7XG59XG5leHBvcnQgY29uc3QgUEFHRV9GQUNUT1JZID0gbmV3IEluamVjdGlvblRva2VuPFBhZ2VGYWN0b3J5PignTmF0aXZlU2NyaXB0UGFnZUZhY3RvcnknKTtcbmV4cG9ydCBjb25zdCBkZWZhdWx0UGFnZUZhY3Rvcnk6IFBhZ2VGYWN0b3J5ID0gZnVuY3Rpb24gKF9vcHRzOiBQYWdlRmFjdG9yeU9wdGlvbnMpIHtcblx0cmV0dXJuIG5ldyBQYWdlKCk7XG59O1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRQYWdlRmFjdG9yeVByb3ZpZGVyID0geyBwcm92aWRlOiBQQUdFX0ZBQ1RPUlksIHVzZVZhbHVlOiBkZWZhdWx0UGFnZUZhY3RvcnkgfTtcblxubGV0IF9yb290UGFnZVJlZjogV2Vha1JlZjxQYWdlPjtcblxuZXhwb3J0IGZ1bmN0aW9uIHNldFJvb3RQYWdlKHBhZ2U6IFBhZ2UpOiB2b2lkIHtcblx0X3Jvb3RQYWdlUmVmID0gbmV3IFdlYWtSZWYocGFnZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSb290UGFnZSgpOiBQYWdlIHtcblx0cmV0dXJuIF9yb290UGFnZVJlZiAmJiBfcm9vdFBhZ2VSZWYuZ2V0KCk7XG59XG5cbi8vIFVzZSBhbiBleHBvcnRlZCBmdW5jdGlvbiB0byBtYWtlIHRoZSBBb1QgY29tcGlsZXIgaGFwcHkuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdFBhZ2UoKTogUGFnZSB7XG5cdGNvbnN0IHJvb3RQYWdlID0gZ2V0Um9vdFBhZ2UoKTtcblx0aWYgKHJvb3RQYWdlIGluc3RhbmNlb2YgUGFnZSkge1xuXHRcdHJldHVybiByb290UGFnZTtcblx0fVxuXHQvLyBpZiAocm9vdFBhZ2UpIHtcblx0Ly8gXHRyZXR1cm4gcm9vdFBhZ2U7XG5cdC8vIH1cblxuXHRjb25zdCBmcmFtZSA9IEZyYW1lLnRvcG1vc3QoKTtcblx0aWYgKGZyYW1lICYmIGZyYW1lLmN1cnJlbnRQYWdlKSB7XG5cdFx0cmV0dXJuIGZyYW1lLmN1cnJlbnRQYWdlO1xuXHR9XG5cblx0cmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0UGFnZVByb3ZpZGVyID0geyBwcm92aWRlOiBQYWdlLCB1c2VGYWN0b3J5OiBnZXREZWZhdWx0UGFnZSB9O1xuXG4vLyBVc2UgYW4gZXhwb3J0ZWQgZnVuY3Rpb24gdG8gbWFrZSB0aGUgQW9UIGNvbXBpbGVyIGhhcHB5LlxuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRGcmFtZSgpOiBGcmFtZSB7XG5cdHJldHVybiBGcmFtZS50b3Btb3N0KCk7XG59XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0RnJhbWVQcm92aWRlciA9IHsgcHJvdmlkZTogRnJhbWUsIHVzZUZhY3Rvcnk6IGdldERlZmF1bHRGcmFtZSB9O1xuXG4vLyBVc2UgYW4gZXhwb3J0ZWQgZnVuY3Rpb24gdG8gbWFrZSB0aGUgQW9UIGNvbXBpbGVyIGhhcHB5LlxuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHREZXZpY2UoKTogSURldmljZSB7XG5cdHJldHVybiBEZXZpY2U7XG59XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0RGV2aWNlUHJvdmlkZXIgPSB7IHByb3ZpZGU6IERldmljZVRva2VuLCB1c2VGYWN0b3J5OiBnZXREZWZhdWx0RGV2aWNlIH07XG4iXX0=